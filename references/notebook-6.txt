from typing import Any

from agent_framework.azure import AgentFunctionApp, AzureOpenAIChatClient
from azure.identity import AzureCliCredential


def _create_agent() -> Any:
    """Create a hosted agent backed by Azure OpenAI."""
    credential=AzureCliCredential()
    client=AzureOpenAIChatClient(credential)
    
    return client.as_agent(
        name="HostedAgent",
        instructions="You are a helpful assistant hosted in Azure Functions.",
    )


app = AgentFunctionApp(agents=[_create_agent()], enable_health_check=True, max_poll_retries=50)
